<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Zstandard (zstandard.Zstandard)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">zstandard</a> &#x00BB; Zstandard</nav><header class="odoc-preamble"><h1>Module <code><span>Zstandard</span></code></h1><p>zstd, short for Zstandard, is a fast lossless compression algorithm, targeting real-time compression scenarios at zlib-level and better compression ratios. The zstd compression library provides in-memory compression and decompression functions. The library supports compression levels from 1 up to <code>max_compression_level ()</code> (currently 22). Levels &gt;= 20, labeled `--ultra`, should be used with caution, as they require more memory.</p><p>Compression can be done in:</p><ul><li>a single step (described as Simple API)</li><li>a single step, reusing a context (described as Explicit context)</li><li>unbounded multiple steps (described as Streaming compression)</li></ul><p>The compression ratio achievable on small data can be highly improved using a dictionary in:</p><ul><li>a single step (described as Simple dictionary API)</li><li>a single step, reusing a dictionary (described as Bulk-processing dictionary API)</li></ul><p>Also see LZ4.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec exception anchored" id="exception-Error"><a href="#exception-Error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Error</span> <span class="keyword">of</span> string</span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Content_size_unknown"><a href="#exception-Content_size_unknown" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Content_size_unknown</span></span></code></div><div class="spec-doc"><p>Might be raised when decompressing a message using a single pass decompression function.</p><p>Decompressed size is an optional field of compressed messages, but is always present when using a single-pass function such as <code>Simple.compress</code>, <code>With_explicit_content.comprss</code>, <code>Simple_dictionary.compress</code> and <code>With_bulk_dictionary.compress</code>. If the decompressed size is not present in the message, it might be necessary to use streaming mode to decompress the message.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Content_size_error"><a href="#exception-Content_size_error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Content_size_error</span></span></code></div><div class="spec-doc"><p>Might be raised when decompressing a message using a single pass decompression function, indicating an error when inspecting the message -- for instance, invalid magic numbers.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Not_enough_capacity"><a href="#exception-Not_enough_capacity" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Not_enough_capacity</span> <span class="keyword">of</span> int</span></code></div><div class="spec-doc"><p>Compression / decompression functions below might raise this exception if the return value they are passed does not have enough capacity. The argument is the required capacity.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Decompressed_size_exceeds_max_int"><a href="#exception-Decompressed_size_exceeds_max_int" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Decompressed_size_exceeds_max_int</span> <span class="keyword">of</span> <span class="xref-unresolved">Core</span>.Int64.t</span></code></div><div class="spec-doc"><p>The size of compressed messages is encoded in as a 64 bit integers. This OCaml library internally uses <code>Int.t</code> to represent size and can't decode messages whose sizes would not fit on an int. For those messages, decompression using the streaming mode is recommended.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max_compression_level"><a href="#val-max_compression_level" class="anchor"></a><code><span><span class="keyword">val</span> max_compression_level : <span>unit <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Returns the max possible value for <code>compression_level</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compression_output_size_bound"><a href="#val-compression_output_size_bound" class="anchor"></a><code><span><span class="keyword">val</span> compression_output_size_bound : <span><span class="xref-unresolved">Core</span>.Int64.t <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Core</span>.Int64.t</span></code></div><div class="spec-doc"><p><code>compression_output_size_bound x</code> is the maximum possible output size when doing a a single-pass compression of an input of size <code>x</code>.</p><p>(Single pass means something like <code>Simple.compress</code>; maximum possible means the worst case of the compression algorithm.).</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Output"><a href="#module-Output" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Output/index.html">Output</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Input"><a href="#module-Input" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Input/index.html">Input</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-decompressed_size"><a href="#val-decompressed_size" class="anchor"></a><code><span><span class="keyword">val</span> decompressed_size : <span><a href="Input/index.html#type-t">Input.t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Core</span>.Int64.t</span></code></div><div class="spec-doc"><p>Returns the decompressed size of a message. Since decompressed size is an optional field of compressed message, it might raise <code>Content_size_unknown</code>, <code>Content_size_error</code> or <code>Error</code>.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Compression_context"><a href="#module-Compression_context" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Compression_context/index.html">Compression_context</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Decompression_context"><a href="#module-Decompression_context" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Decompression_context/index.html">Decompression_context</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Simple"><a href="#module-Simple" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Simple/index.html">Simple</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-With_explicit_context"><a href="#module-With_explicit_context" class="anchor"></a><code><span><span class="keyword">module</span> <a href="With_explicit_context/index.html">With_explicit_context</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>This module implements compression and decompression with explicitly managed contexts. When compressing or decompressing many times, it is recommended to allocate a context just once, and re-use it for each successive compression operation. This will make workload friendlier for system's memory.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Dictionary"><a href="#module-Dictionary" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Dictionary/index.html">Dictionary</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Simple_dictionary"><a href="#module-Simple_dictionary" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Simple_dictionary/index.html">Simple_dictionary</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Bulk_processing_dictionary"><a href="#module-Bulk_processing_dictionary" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Bulk_processing_dictionary/index.html">Bulk_processing_dictionary</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Streaming"><a href="#module-Streaming" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Streaming/index.html">Streaming</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The functions exposed in this module differ from the rest of the library, and operates on stream of data (rather than on single messages). Therefore, the API is more complex, and does not use the <code>Input</code> module.</p></div></div></div></body></html>
